<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">
                
                <h2>BAB 2.2 ‚Äî DML (Data Manipulation Language)</h2>

                <p>Kalau:
                <ul>
                    <li>DDL = bikin rumah</li>
                    <li>DML = ngisi, mindahin, dan beresin barang di rumah itu</li>
                </ul> <br>

                Di sinilah kamu bakal paling sering ngetik SQL di dunia nyata.</p>

                <br> <hr> <br>

                <h3>A. Apa itu DML?</h3>

                <div class="quote"><p>DML = perintah SQL untuk mengelola ISI data di tabel</p></div>

                <br>

                <p>Yang termasuk DML:
                <ul>
                    <li><code>INSERT</code> ‚Üí masukin data</li>
                    <li><code>UPDATE</code> ‚Üí ubah data</li>
                    <li><code>DELETE</code> ‚Üí hapus data</li>
                    <li><code>SELECT</code> ‚Üí ambil data (query)</li>
                </ul> <br>

                üìå DML tidak mengubah struktur, tapi mengubah data</p>

                <br> <hr> <br>

                <h3>B. Karakteristik DML (beda sama DDL)</h3>
                <ul>
                    <li>Bisa kena banyak row</li>
                    <li>Bisa dibatasi pakai WHERE</li>
                    <li>Bisa di-rollback kalau pakai transaction</li>
                    <li>Paling rawan bug kalau WHERE salah</li>
                </ul>
                
                <p>Kesalahan DML = data salah <br>
                Kesalahan DDL = sistem rusak</p>

                <br> <hr> <br>

                <h3>C. Urutan Logis DML</h3>

                <p>Di aplikasi nyata:
                <ul>
                    <li><code>INSERT</code> (data masuk)</li>
                    <li><code>SELECT</code> (data ditampilkan)</li>
                    <li><code>UPDATE</code> (data berubah)</li>
                    <li><code>DELETE</code> (data dibersihkan)</li>
                </ul> <br>
                
                Makanya kita mulai dari INSERT</p>

                <br> <hr> <br>

                <h2>2.2.1 INSERT ‚Äî Memasukkan Data ke Tabel</h2>
                <h3>A. Bentuk Dasar INSERT (WAJIB HAFAL)</h3>
<pre>
    INSERT INTO nama_tabel (kolom1, kolom2, kolom3) <br>
    VALUES (nilai1, nilai2, nilai3);
</pre>

                <p>Contoh:</p>
<pre>
    INSERT INTO users (email, name, password) <br>
    VALUES ('a@b.com', 'Fany', 'hashed_password');
</pre>

                <br> <hr> <br>
                
                <h3>B. INSERT Tanpa Sebut Kolom (‚ö†Ô∏è HATI-HATI)</h3>
<pre>
    INSERT INTO users <br>
    VALUES (1, 'a@b.com', 'Fany', 'hashed_password');
</pre>

                <p>‚ùå Tidak direkomendasikan, karena:
                <ul>
                    <li>Bergantung urutan kolom</li>
                    <li>ALTER TABLE ‚Üí error</li>
                    <li>Best practice: SELALU sebut kolom</li>
                </ul></p>

                <br> <hr> <br>

                <h3>C. INSERT Multiple Rows (lebih efisien)</h3>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES <br>
    ('a@b.com', 'A'), <br>
    ('b@b.com', 'B'), <br>
    ('c@b.com', 'C');
</pre>

                <p>Lebih cepat dari banyak INSERT satu-satu.</p>

                <br> <hr> <br>

                <h3>D. INSERT dengan DEFAULT Value</h3>

                <p>Jika kolom punya DEFAULT:</p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('x@y.com', 'X');
</pre>

                <p>Kolom lain otomatis:
                <ul>
                    <li><code>created_at</code></li>
                    <li><code>is_active</code></li>
                    <li>dll</li>
                </ul> </p>

                <br> <hr> <br>

                <h3>E. INSERT dengan AUTO_INCREMENT</h3>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('c@d.com', 'C');
</pre>

                <p>id akan otomatis diisi MySQL.</p>

                <br> <hr> <br>

                <h3>F. INSERT dari SELECT (LEVEL PRO)</h3>
<pre>
    INSERT INTO archived_users (email, name) <br>
    SELECT email, name <br>
    FROM users <br>
    WHERE is_active = 0;
</pre>

                <p>Dipakai untuk:
                <ul>
                    <li>Backup</li>
                    <li>Archiving</li>
                    <li>Migration data</li>
                </ul></p>
                
                <h3>G. INSERT + UNIQUE (error handling)</h3>

                <p>Jika kolom <code>UNIQUE</code>:</p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('a@b.com', 'Duplicate');
</pre>

                <p>üëâ ERROR: duplicate key <br> <br>

                Solusi 1: <code>IGNORE</code></p>
<pre>
    INSERT IGNORE INTO users (email, name) <br>
    VALUES ('a@b.com', 'Duplicate');
</pre>

                <p>‚ö†Ô∏è Data diabaikan diam-diam <br> <br>

                Solusi 2: <code>ON DUPLICATE KEY UPDATE</code></p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('a@b.com', 'Updated') <br>
    ON DUPLICATE KEY UPDATE <br>
    name = VALUES(name);
</pre>

                <p>üî• Banyak dipakai di sistem sync</p>

                <br> <hr> <br>

                <h3>H. INSERT + FOREIGN KEY</h3>
<pre>
    INSERT INTO orders (user_id, total) <br>
    VALUES (999, 100000);
</pre>

                <p>Jika user_id tidak ada di users: <br>
                ‚ùå ERROR (FK constraint) <br>
                üëâ Integritas data terjaga</p>

                <br> <hr> <br>

                <h3>I. Kesalahan Fatal Pemula ‚ùå</h3>

                <p>‚ùå INSERT tanpa kolom <br>
                ‚ùå Nilai tidak sesuai tipe data <br>
                ‚ùå Lupa constraint UNIQUE / FK <br>
                ‚ùå Masukin data mentah tanpa validasi aplikasi</p>

                <br> <hr> <br>

                <h3>J. Checklist Aman INSERT</h3>

                <p>Sebelum INSERT:
                <ul>
                    <li>Kolom wajib sudah diisi?</li>
                    <li>Tipe data sesuai?</li>
                    <li>UNIQUE aman?</li>
                    <li>FK valid?</li>
                </ul> </p>

                <br> <hr> <br>

                <h3>K. Mini Latihan üî•</h3>

                <p>Asumsi tabel products:</p>
<pre>
    id, name, price, stock, is_active, created_at
</pre>

                <p>Tugas:</p>
                <ul>
                    <li><code>INSERT</code> 1 produk</li>
                    <li><code>INSERT</code> 3 produk sekaligus</li>
                    <li><code>INSERT</code> produk tanpa isi is_active & created_at</li>
                </ul>
                

                

                

                <br> <br>

                <hr>

                <br> <br>

                2.2.2 UPDATE ‚Äî Mengubah Data Tanpa Nyesel
                A. Apa itu UPDATE?

                UPDATE dipakai untuk mengubah data yang SUDAH ADA di tabel.

                UPDATE nama_tabel
                SET kolom = nilai
                WHERE kondisi;


                ‚ö†Ô∏è Tanpa WHERE = semua data berubah

                B. Contoh UPDATE Paling Dasar
                UPDATE users
                SET name = 'Fany'
                WHERE id = 1;


                Artinya:

                Cari user id = 1

                Ubah name

                C. UPDATE Banyak Kolom Sekaligus
                UPDATE users
                SET
                    name = 'Fany Ganesta',
                    is_active = 1
                WHERE id = 1;

                D. UPDATE Tanpa WHERE (INI DOSA BESAR)
                UPDATE users
                SET is_active = 0;


                üî• Semua user nonaktif
                üî• Pernah kejadian di production dunia nyata

                Senior rule:
                SELECT dulu, baru UPDATE

                E. Pola Aman UPDATE (WAJIB DIPAKAI)
                Step 1: SELECT dulu
                SELECT * FROM users WHERE id = 1;

                Step 2: Kalau benar ‚Üí UPDATE
                UPDATE users
                SET is_active = 0
                WHERE id = 1;

                F. UPDATE dengan Kondisi Kompleks
                UPDATE orders
                SET status = 'cancelled'
                WHERE status = 'pending'
                AND created_at < NOW() - INTERVAL 7 DAY;


                Dipakai untuk:

                auto-cancel

                cleanup data

                G. UPDATE + LIMIT (MySQL Spesifik)
                UPDATE users
                SET is_active = 0
                ORDER BY created_at ASC
                LIMIT 10;


                ‚ö†Ô∏è MySQL-only
                ‚ö†Ô∏è Hati-hati di production

                H. UPDATE Berdasarkan Tabel Lain (JOIN)

                üî• LEVEL PRO

                UPDATE orders o
                JOIN users u ON o.user_id = u.id
                SET o.status = 'blocked'
                WHERE u.is_active = 0;


                Dipakai untuk:

                sinkron status

                data cleanup

                I. UPDATE + UNIQUE Constraint
                UPDATE users
                SET email = 'a@b.com'
                WHERE id = 2;


                Jika email sudah ada:
                ‚ùå ERROR duplicate key

                üëâ Database menjaga integritas

                J. UPDATE + NULL

                Set ke NULL:

                UPDATE users
                SET phone = NULL
                WHERE id = 1;


                Kalau kolom NOT NULL:
                ‚ùå ERROR

                K. UPDATE dalam Transaction (LEVEL AMAN)
                START TRANSACTION;

                UPDATE users SET is_active = 0 WHERE id = 1;

                -- cek dulu
                SELECT * FROM users WHERE id = 1;

                COMMIT;   -- simpan
                -- atau
                ROLLBACK; -- batal


                üî• Ini kebiasaan senior

                L. Kesalahan Fatal Pemula ‚ùå

                ‚ùå UPDATE tanpa WHERE
                ‚ùå Salah kondisi WHERE
                ‚ùå Tidak cek data sebelum UPDATE
                ‚ùå UPDATE massal di jam sibuk

                M. Checklist Aman UPDATE

                Sebelum tekan Enter:

                Sudah SELECT dulu?

                WHERE spesifik?

                Pakai PK?

                Perlu transaction?

                N. Mini Latihan üî•

                Tabel products:

                id, name, price, stock, is_active


                Tugas:

                Update harga produk id = 5

                Nonaktifkan semua produk dengan stock = 0

                Tambah stock +10 untuk produk tertentu

                <br> <br>

                <hr>

                <br> <br>

                2.2.3 DELETE ‚Äî Menghapus Data Tanpa Bikin Kuburan Massal
                A. Apa itu DELETE?

                DELETE digunakan untuk menghapus data (row) dari tabel.

                DELETE FROM nama_tabel
                WHERE kondisi;


                üìå Struktur tabel tetap ada
                üìå Yang hilang cuma datanya

                B. DELETE vs DROP vs TRUNCATE (recap cepat)
                Perintah	Efek	Bisa Rollback
                DELETE	Hapus row tertentu	‚úÖ (transaction)
                TRUNCATE	Hapus semua row	‚ùå
                DROP	Hapus tabel	‚ùå
                C. DELETE Paling Dasar
                DELETE FROM users
                WHERE id = 10;


                Hapus 1 baris spesifik

                D. DELETE Tanpa WHERE = Bencana
                DELETE FROM users;


                üî• Semua data hilang
                üî• Pernah bikin startup rollback database

                Rule emas:
                DELETE TANPA WHERE = SALAH BESAR

                E. Pola Aman DELETE (WAJIB)
                Step 1: SELECT dulu
                SELECT * FROM users WHERE is_active = 0;

                Step 2: DELETE kalau yakin
                DELETE FROM users WHERE is_active = 0;

                F. DELETE dengan Kondisi Kompleks
                DELETE FROM orders
                WHERE status = 'cancelled'
                AND created_at < NOW() - INTERVAL 1 YEAR;


                Dipakai untuk:

                data cleanup

                archiving

                G. DELETE + LIMIT (MySQL Spesifik)
                DELETE FROM logs
                ORDER BY created_at ASC
                LIMIT 1000;


                Dipakai untuk:

                hapus bertahap

                hindari lock besar

                H. DELETE dengan JOIN (LEVEL PRO)
                DELETE o
                FROM orders o
                JOIN users u ON o.user_id = u.id
                WHERE u.is_active = 0;


                Hapus order milik user nonaktif.

                ‚ö†Ô∏è Sangat powerful ‚Üí sangat berbahaya

                I. DELETE + FOREIGN KEY

                Jika tabel direferensikan:

                DELETE FROM users WHERE id = 1;


                Jika ada order milik user tsb:

                ‚ùå ERROR (default)

                atau:

                ON DELETE CASCADE

                ON DELETE SET NULL

                üìå FK rules menentukan perilaku

                J. Soft Delete (BEST PRACTICE)

                üî• Di aplikasi nyata, jarang pakai DELETE langsung

                Pola soft delete
                UPDATE users
                SET deleted_at = NOW()
                WHERE id = 1;


                Keuntungan:

                Data aman

                Bisa restore

                Audit trail

                Framework seperti Laravel pakai ini.

                K. DELETE dalam Transaction (SUPER AMAN)
                START TRANSACTION;

                DELETE FROM users WHERE id = 5;

                SELECT * FROM users WHERE id = 5;

                ROLLBACK; -- kalau salah
                -- COMMIT; -- kalau yakin

                L. Kesalahan Fatal Pemula ‚ùå

                ‚ùå DELETE tanpa WHERE
                ‚ùå Salah kondisi WHERE
                ‚ùå Tidak cek FK
                ‚ùå Hapus data bisnis penting permanen

                M. Checklist Aman DELETE

                Sebelum execute:

                Sudah SELECT dulu?

                WHERE spesifik?

                FK aman?

                Lebih baik soft delete?

                N. Mini Latihan üî•

                Tabel products:

                id, name, stock, is_active, deleted_at


                Tugas:

                Soft delete produk id = 3

                Hapus permanen produk yang deleted_at lebih dari 2 tahun

                Hapus 100 data log terlama

                <br> <br>

                <hr>

                <br> <br>

                2.2.4 SELECT ‚Äî Mengambil Data (Inti SQL)
                A. Apa itu SELECT?

                SELECT dipakai untuk mengambil / membaca data dari database.

                SELECT kolom
                FROM tabel;


                üìå SELECT tidak mengubah data
                üìå 80% waktu kamu di SQL = SELECT

                B. SELECT Paling Dasar
                SELECT * FROM users;


                Artinya:

                Ambil semua kolom

                Dari semua baris

                ‚ö†Ô∏è Di production:

                hindari SELECT *

                C. SELECT Kolom Tertentu (BEST PRACTICE)
                SELECT id, name, email
                FROM users;


                Lebih:

                cepat

                aman

                jelas

                D. Alias Kolom & Tabel
                Alias kolom
                SELECT name AS full_name
                FROM users;

                Alias tabel
                SELECT u.name, u.email
                FROM users u;


                Dipakai saat:

                JOIN

                query panjang

                E. SELECT + Perhitungan
                SELECT
                    name,
                    price,
                    price * stock AS total_value
                FROM products;


                üìå Query bisa olah data sederhana

                F. SELECT DISTINCT
                SELECT DISTINCT status
                FROM orders;


                Ambil nilai unik (tanpa duplikasi).

                ‚ö†Ô∏è DISTINCT mahal kalau data besar

                G. SELECT + LIMIT
                SELECT id, name
                FROM users
                LIMIT 10;


                Ambil 10 data pertama.

                H. SELECT + OFFSET (pagination)
                SELECT id, name
                FROM users
                LIMIT 10 OFFSET 20;


                Artinya:

                page ke-3 (0‚Äì9, 10‚Äì19, 20‚Äì29)

                I. Urutan Eksekusi SELECT (WAJIB PAHAM)

                Secara logika:

                FROM

                WHERE

                SELECT

                ORDER BY

                LIMIT

                Ini penting saat query kompleks.

                J. Kesalahan Umum Pemula ‚ùå

                ‚ùå SELECT * di tabel besar
                ‚ùå Ambil kolom yang tidak dipakai
                ‚ùå Tidak pakai LIMIT
                ‚ùå Query tanpa alias saat JOIN

                K. Contoh Query Nyata
                SELECT id, email, created_at
                FROM users
                LIMIT 50;


                Simple, aman, efisien.

                L. SELECT itu fondasi ke mana-mana

                Dari sini kamu akan lanjut ke:

                WHERE

                JOIN

                GROUP BY

                HAVING

                Subquery

                SELECT = bahasa berpikir SQL

                M. Mini Latihan üî•

                Tabel products:

                id, name, price, stock


                Tugas:

                Ambil name & price

                Ambil produk dengan total_value = price * stock

                Ambil 5 produk pertama
                
                <a href="2b-dml.html" class="btn-next">2b. DDL</a>
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>