<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">
                
                <h2>BAB 2.2 ‚Äî DML (Data Manipulation Language)</h2>

                <p>Kalau:
                <ul>
                    <li>DDL = bikin rumah</li>
                    <li>DML = ngisi, mindahin, dan beresin barang di rumah itu</li>
                </ul> <br>

                Di sinilah kamu bakal paling sering ngetik SQL di dunia nyata.</p>

                <br> <hr> <br>

                <h3>A. Apa itu DML?</h3>

                <div class="quote"><p>DML = perintah SQL untuk mengelola ISI data di tabel</p></div>

                <br>

                <p>Yang termasuk DML:
                <ul>
                    <li><code>INSERT</code> ‚Üí masukin data</li>
                    <li><code>UPDATE</code> ‚Üí ubah data</li>
                    <li><code>DELETE</code> ‚Üí hapus data</li>
                    <li><code>SELECT</code> ‚Üí ambil data (query)</li>
                </ul> <br>

                üìå DML tidak mengubah struktur, tapi mengubah data</p>

                <br> <hr> <br>

                <h3>B. Karakteristik DML (beda sama DDL)</h3>
                <ul>
                    <li>Bisa kena banyak row</li>
                    <li>Bisa dibatasi pakai WHERE</li>
                    <li>Bisa di-rollback kalau pakai transaction</li>
                    <li>Paling rawan bug kalau WHERE salah</li>
                </ul>
                
                <p>Kesalahan DML = data salah <br>
                Kesalahan DDL = sistem rusak</p>

                <br> <hr> <br>

                <h3>C. Urutan Logis DML</h3>

                <p>Di aplikasi nyata:
                <ul>
                    <li><code>INSERT</code> (data masuk)</li>
                    <li><code>SELECT</code> (data ditampilkan)</li>
                    <li><code>UPDATE</code> (data berubah)</li>
                    <li><code>DELETE</code> (data dibersihkan)</li>
                </ul> <br>
                
                Makanya kita mulai dari INSERT</p>

                <br> <hr> <br>

                <h2>2.2.1 INSERT ‚Äî Memasukkan Data ke Tabel</h2>
                <h3>A. Bentuk Dasar INSERT (WAJIB HAFAL)</h3>
<pre>
    INSERT INTO nama_tabel (kolom1, kolom2, kolom3) <br>
    VALUES (nilai1, nilai2, nilai3);
</pre>

                <p>Contoh:</p>
<pre>
    INSERT INTO users (email, name, password) <br>
    VALUES ('a@b.com', 'Fany', 'hashed_password');
</pre>

                <br> <hr> <br>
                
                <h3>B. INSERT Tanpa Sebut Kolom (‚ö†Ô∏è HATI-HATI)</h3>
<pre>
    INSERT INTO users <br>
    VALUES (1, 'a@b.com', 'Fany', 'hashed_password');
</pre>

                <p>‚ùå Tidak direkomendasikan, karena:
                <ul>
                    <li>Bergantung urutan kolom</li>
                    <li>ALTER TABLE ‚Üí error</li>
                    <li>Best practice: SELALU sebut kolom</li>
                </ul></p>

                <br> <hr> <br>

                <h3>C. INSERT Multiple Rows (lebih efisien)</h3>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES <br>
    ('a@b.com', 'A'), <br>
    ('b@b.com', 'B'), <br>
    ('c@b.com', 'C');
</pre>

                <p>Lebih cepat dari banyak INSERT satu-satu.</p>

                <br> <hr> <br>

                <h3>D. INSERT dengan DEFAULT Value</h3>

                <p>Jika kolom punya DEFAULT:</p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('x@y.com', 'X');
</pre>

                <p>Kolom lain otomatis:
                <ul>
                    <li><code>created_at</code></li>
                    <li><code>is_active</code></li>
                    <li>dll</li>
                </ul> </p>

                <br> <hr> <br>

                <h3>E. INSERT dengan AUTO_INCREMENT</h3>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('c@d.com', 'C');
</pre>

                <p>id akan otomatis diisi MySQL.</p>

                <br> <hr> <br>

                <h3>F. INSERT dari SELECT (LEVEL PRO)</h3>
<pre>
    INSERT INTO archived_users (email, name) <br>
    SELECT email, name <br>
    FROM users <br>
    WHERE is_active = 0;
</pre>

                <p>Dipakai untuk:
                <ul>
                    <li>Backup</li>
                    <li>Archiving</li>
                    <li>Migration data</li>
                </ul></p>
                
                <h3>G. INSERT + UNIQUE (error handling)</h3>

                <p>Jika kolom <code>UNIQUE</code>:</p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('a@b.com', 'Duplicate');
</pre>

                <p>üëâ ERROR: duplicate key <br> <br>

                Solusi 1: <code>IGNORE</code></p>
<pre>
    INSERT IGNORE INTO users (email, name) <br>
    VALUES ('a@b.com', 'Duplicate');
</pre>

                <p>‚ö†Ô∏è Data diabaikan diam-diam <br> <br>

                Solusi 2: <code>ON DUPLICATE KEY UPDATE</code></p>
<pre>
    INSERT INTO users (email, name) <br>
    VALUES ('a@b.com', 'Updated') <br>
    ON DUPLICATE KEY UPDATE <br>
    name = VALUES(name);
</pre>

                <p>üî• Banyak dipakai di sistem sync</p>

                <br> <hr> <br>

                <h3>H. INSERT + FOREIGN KEY</h3>
<pre>
    INSERT INTO orders (user_id, total) <br>
    VALUES (999, 100000);
</pre>

                <p>Jika user_id tidak ada di users: <br>
                ‚ùå ERROR (FK constraint) <br>
                üëâ Integritas data terjaga</p>

                <br> <hr> <br>

                <h3>I. Kesalahan Fatal Pemula ‚ùå</h3>

                <p>‚ùå INSERT tanpa kolom <br>
                ‚ùå Nilai tidak sesuai tipe data <br>
                ‚ùå Lupa constraint UNIQUE / FK <br>
                ‚ùå Masukin data mentah tanpa validasi aplikasi</p>

                <br> <hr> <br>

                <h3>J. Checklist Aman INSERT</h3>

                <p>Sebelum INSERT:
                <ul>
                    <li>Kolom wajib sudah diisi?</li>
                    <li>Tipe data sesuai?</li>
                    <li>UNIQUE aman?</li>
                    <li>FK valid?</li>
                </ul> </p>

                <br> <hr> <br>

                <h3>K. Mini Latihan üî•</h3>

                <p>Asumsi tabel products:</p>
<pre>
    id, name, price, stock, is_active, created_at
</pre>

                <p>Tugas:</p>
                <ul>
                    <li><code>INSERT</code> 1 produk</li>
                    <li><code>INSERT</code> 3 produk sekaligus</li>
                    <li><code>INSERT</code> produk tanpa isi is_active & created_at</li>
                </ul>
                

                

                

                <br> <br>

                <hr>

                <br> <br>

                <h2>2.2.2 UPDATE ‚Äî Mengubah Data Tanpa Nyesel</h2>
                <h3>A. Apa itu UPDATE?</h3>

                <div class="quote"><p>UPDATE dipakai untuk mengubah data yang SUDAH ADA di tabel.</p></div>
<pre>
    UPDATE nama_tabel <br>
    SET kolom = nilai <br>
    WHERE kondisi;
</pre>

                <p>‚ö†Ô∏è Tanpa WHERE = semua data berubah</p>

                <br> <hr> <br>

                <h3>B. Contoh UPDATE Paling Dasar</h3>
<pre>
    UPDATE users <br>
    SET name = 'Fany' <br>
    WHERE id = 1;
</pre>

                <p>Artinya:
                <ul>
                    <li>Cari user id = 1</li>
                    <li>Ubah name</li>
                </ul></p>
                
                <br> <hr> <br>

                <h3>C. UPDATE Banyak Kolom Sekaligus</h3>
<pre>
    UPDATE users <br>
    SET <br>
        name = 'Fany Ganesta', <br>
        is_active = 1 <br>
    WHERE id = 1;
</pre>

                <br> <hr> <br>

                <h3>D. UPDATE Tanpa WHERE (INI DOSA BESAR)</h3>
<pre>
    UPDATE users <br>
    SET is_active = 0;
</pre>

                <p>üî• Semua user nonaktif <br>
                üî• Pernah kejadian di production dunia nyata <br> <br>

                Senior rule: <br>
                SELECT dulu, baru UPDATE</p>

                <br> <hr> <br>

                <h3>E. Pola Aman UPDATE (WAJIB DIPAKAI)</h3>
                <p>Step 1: SELECT dulu</p>
<pre>
    SELECT * FROM users WHERE id = 1;
</pre>

                <p>Step 2: Kalau benar ‚Üí UPDATE</p>
<pre>
    UPDATE users <br>
    SET is_active = 0 <br>
    WHERE id = 1;
</pre>

                <br> <hr> <br>

                <h3>F. UPDATE dengan Kondisi Kompleks</h3>
<pre>
    UPDATE orders <br>
    SET status = 'cancelled' <br>
    WHERE status = 'pending' <br>
    AND created_at < NOW() - INTERVAL 7 DAY;
</pre>

                <p>Dipakai untuk:
                <ul>
                    <li>auto-cancel</li>
                    <li>cleanup data</li>
                </ul></p>

                <br> <hr> <br>

                <h3>G. UPDATE + LIMIT (MySQL Spesifik)</h3>
<pre>
    UPDATE users <br>
    SET is_active = 0 <br>
    ORDER BY created_at ASC <br>
    LIMIT 10;
</pre>

                <p>‚ö†Ô∏è MySQL-only <br>
                ‚ö†Ô∏è Hati-hati di production</p>

                <br> <hr> <br>

                <h3>H. UPDATE Berdasarkan Tabel Lain (JOIN)</h3>

                <p>üî• LEVEL PRO</p>
<pre>
    UPDATE orders o<br>
    JOIN users u ON o.user_id = u.id <br>
    SET o.status = 'blocked' <br>
    WHERE u.is_active = 0;
</pre>

                <p>Dipakai untuk:
                <ul>
                    <li>sinkron status</li>
                    <li>data cleanup</li>
                </ul></p>
                
                <br> <hr> <br>

                <h3>I. UPDATE + UNIQUE Constraint</h3>
<pre>
    UPDATE users <br>
    SET email = 'a@b.com' <br>
    WHERE id = 2;
</pre>

                <p>Jika email sudah ada: <br>
                ‚ùå ERROR duplicate key <br> <br>

                üëâ Database menjaga integritas</p>

                <br> <hr> <br>

                <h3>J. UPDATE + NULL</h3>

                <p>Set ke NULL:</p>
<pre>
    UPDATE users <br>
    SET phone = NULL <br>
    WHERE id = 1;
</pre>

                <p>Kalau kolom NOT NULL: <br>
                ‚ùå ERROR</p>

                <br> <hr> <br>

                <h3>K. UPDATE dalam Transaction (LEVEL AMAN)</h3>
<pre>
    START TRANSACTION; <br> <br>

    UPDATE users SET is_active = 0 WHERE id = 1; <br>

    -- cek dulu <br>
    SELECT * FROM users WHERE id = 1; <br> <br>

    COMMIT;   -- simpan <br>
    -- atau <br>
    ROLLBACK; -- batal
</pre>

                <p>üî• Ini kebiasaan senior</p>

                <br> <hr> <br>

                <h3>L. Kesalahan Fatal Pemula ‚ùå</h3>

                <p>‚ùå UPDATE tanpa WHERE <br>
                ‚ùå Salah kondisi WHERE <br>
                ‚ùå Tidak cek data sebelum UPDATE <br>
                ‚ùå UPDATE massal di jam sibuk</p>

                <br> <hr> <br>

                <h3>M. Checklist Aman UPDATE</h3>

                <p>Sebelum tekan Enter:
                <ul>
                    <li>Sudah SELECT dulu?</li>
                    <li>WHERE spesifik?</li>
                    <li>Pakai PK?</li>
                    <li>Perlu transaction?</li>
                </ul></p>

                <br> <hr> <br>

                <h3>N. Mini Latihan üî•</h3>

                <p>Tabel products:</p>
<pre>
    id, name, price, stock, is_active
</pre>
                <p>Tugas:
                <ul>
                    <li>Update harga produk id = 5</li>
                    <li>Nonaktifkan semua produk dengan stock = 0</li>
                    <li>Tambah stock +10 untuk produk tertentu</li>
                </ul></p>
                
                <br> <br>

                <hr>

                <br> <br>

                <h2>2.2.3 DELETE ‚Äî Menghapus Data Tanpa Bikin Kuburan Massal</h2>
                <h3>A. Apa itu DELETE?</h3>

                <div class="quote"><p>DELETE digunakan untuk menghapus data (row) dari tabel.</p></div>
<pre>
    DELETE FROM nama_tabel <br>
    WHERE kondisi;
</pre>

                <p>üìå Struktur tabel tetap ada <br>
                üìå Yang hilang cuma datanya</p>

                <br> <hr> <br>

                <h3>B. DELETE vs DROP vs TRUNCATE (recap cepat)</h3>
                <table>
                    <tr>
                        <th>Perintah</th>
                        <th>Efek</th>
                        <th>Bisa Rollback</th>
                    </tr>
                    <tr>
                        <td>DELETE<code></code></td>
                        <td>Hapus row tertentu</td>
                        <td class="ct">‚úÖ (transaction)</td>
                    </tr>
                    <tr>
                        <td><code>TRUNCATE</code></td>
                        <td>Hapus semua row</td>
                        <td class="ct">‚ùå</td>
                    </tr>
                    <tr>
                        <td><code>DROP</code></td>
                        <td>Hapus tabel</td>
                        <td class="ct">‚ùå</td>
                    </tr>
                </table>

                <br> <hr> <br>

                <h3>C. DELETE Paling Dasar</h3>
<pre>
    DELETE FROM users <br>
    WHERE id = 10;
</pre>
                <p>Hapus 1 baris spesifik</p>

                <br> <hr> <br>

                <h3>D. DELETE Tanpa WHERE = Bencana</h3>
<pre>
    DELETE FROM users;
</pre>

                <p>üî• Semua data hilang <br>
                üî• Pernah bikin startup rollback database <br> <br>

                Rule emas: <br></p>
                <div class="quote"><p>DELETE TANPA WHERE = SALAH BESAR</p></div>

                <br> <hr> <br>

                <h3>E. Pola Aman DELETE (WAJIB)</h3>
                <p>Step 1: SELECT dulu</p>
<pre>
    SELECT * FROM users WHERE is_active = 0;
</pre>
                <p>Step 2: DELETE kalau yakin</p>
<pre>
    DELETE FROM users WHERE is_active = 0;
</pre>
                <br> <hr> <br>

                <h3>F. DELETE dengan Kondisi Kompleks</h3>
<pre>
    DELETE FROM orders <br> 
    WHERE status = 'cancelled' <br> 
    AND created_at < NOW() - INTERVAL 1 YEAR;
</pre>
                <p>Dipakai untuk:
                <ul>
                    <li>data cleanup</li>
                    <li>archiving</li>
                </ul></p>
                
                <br> <hr> <br>

                <h3>G. DELETE + LIMIT (MySQL Spesifik)</h3>
<pre>
    DELETE FROM logs <br> 
    ORDER BY created_at ASC <br>
    LIMIT 1000;
</pre>

                <p>Dipakai untuk:
                <ul>
                    <li>hapus bertahap</li>
                    <li>hindari lock besar</li>
                </ul></p>
                <br> <hr> <br>

                <h3>H. DELETE dengan JOIN (LEVEL PRO)</h3>
<pre>
    DELETE o <br>
    FROM orders o <br>
    JOIN users u ON o.user_id = u.id <br>
    WHERE u.is_active = 0;
</pre>

                <p>Hapus order milik user nonaktif. <br> <br>

                ‚ö†Ô∏è Sangat powerful ‚Üí sangat berbahaya</p>

                <br> <hr> <br>

                <h3>I. DELETE + FOREIGN KEY</h3>

                <p>Jika tabel direferensikan:</p>
<pre>
    DELETE FROM users WHERE id = 1;
</pre>

                <p>Jika ada order milik user tsb: <br> <br>

                ‚ùå ERROR (default)

                atau:
                <ul>
                    <li>ON DELETE CASCADE</li>
                    <li>ON DELETE SET NULL</li>
                </ul> <br>

                üìå FK rules menentukan perilaku</p>

                <br> <hr> <br>

                <h3>J. Soft Delete (BEST PRACTICE)</h3>

                <p>üî• Di aplikasi nyata, jarang pakai DELETE langsung <br> <br>

                Pola soft delete</p>
<pre>
    UPDATE users
    SET deleted_at = NOW()
    WHERE id = 1;
</pre>

                <p>Keuntungan:
                <ul>
                    <li>Data aman</li>
                    <li>Bisa restore</li>
                    <li>Audit trail</li>
                </ul> <br>

                Framework seperti Laravel pakai ini.</p>

                <br> <hr> <br>

                <h3>K. DELETE dalam Transaction (SUPER AMAN)</h3>
<pre>
    START TRANSACTION; <br> <br>

    DELETE FROM users WHERE id = 5; <br> <br>

    SELECT * FROM users WHERE id = 5; <br> <br>

    ROLLBACK; -- kalau salah <br>
    -- COMMIT; -- kalau yakin
</pre>
                <br> <hr> <br>

                <h3>L. Kesalahan Fatal Pemula ‚ùå</h3>

                <p>‚ùå DELETE tanpa WHERE <br>
                ‚ùå Salah kondisi WHERE <br>
                ‚ùå Tidak cek FK <br>
                ‚ùå Hapus data bisnis penting permanen</p>

                <h3>M. Checklist Aman DELETE</h3>

                <p>Sebelum execute:
                <ul>
                    <li>Sudah SELECT dulu?</li>
                    <li>WHERE spesifik?</li>
                    <li>FK aman?</li>
                    <li>Lebih baik soft delete?</li>
                </ul></p>
                
                <br> <hr> <br>

                <h3>N. Mini Latihan üî•</h3>

                <p>Tabel products:</p>
<pre>
    id, name, stock, is_active, deleted_at
</pre>
                <p>Tugas:
                <ul>
                    <li>Soft delete produk id = 3</li>
                    <li>Hapus permanen produk yang deleted_at lebih dari 2 tahun</li>
                    <li>Hapus 100 data log terlama</li>
                </ul></p>
                

                <br> <br>

                <hr>

                <br> <br>

                <h2>2.2.4 SELECT ‚Äî Mengambil Data (Inti SQL)</h2>
                <h3>A. Apa itu SELECT?</h3>

                <div class="quote"><p>SELECT dipakai untuk mengambil / membaca data dari database.</p></div>
<pre>
    SELECT kolom <br>
    FROM tabel;
</pre>

                <p>üìå SELECT tidak mengubah data <br>
                üìå 80% waktu kamu di SQL = SELECT </p>

                <br> <hr> <br>

                <h3>B. SELECT Paling Dasar</h3>
<pre>
    SELECT * FROM users;
</pre>

                <p>Artinya:
                <ul>
                    <li>Ambil semua kolom</li>
                    <li>Dari semua baris</li>
                </ul> <br>

                ‚ö†Ô∏è Di production: <br> <br>

                hindari <code>SELECT *</code></p>

                <br> <hr> <br>

                <h3>C. SELECT Kolom Tertentu (BEST PRACTICE)</h3>
<pre>
    SELECT id, name, email <br>
    FROM users;
</pre>

                <p>Lebih:
                <ul>
                    <li>cepat</li>
                    <li>aman</li>
                    <li>jelas</li>
                </ul></p>
                
                <br> <hr> <br>

                <h3>D. Alias Kolom & Tabel</h3>
                <p>Alias kolom</p>
<pre>
    SELECT name AS full_name <br>
    FROM users;
</pre>
                <p>Alias tabel</p>
<pre>
    SELECT u.name, u.email <br>
    FROM users u;
</pre>

                <p>Dipakai saat:</p>
                <ul>
                    <li>JOIN</li>
                    <li>query panjang</li>
                </ul>

                <br> <hr> <br>

                <h3>E. SELECT + Perhitungan</h3>
<pre>
    SELECT <br>
        name, <br>
        price, <br>
        price * stock AS total_value <br>
    FROM products;
</pre>

                <p>üìå Query bisa olah data sederhana</p>

                <br> <hr> <br>

                <h3>F. SELECT DISTINCT</h3>
<pre>
    SELECT DISTINCT status   <br>
    FROM orders;
</pre>

                <p>Ambil nilai unik (tanpa duplikasi). <br> <br>

                ‚ö†Ô∏è <code>DISTINCT</code> mahal kalau data besar</p>

                <br> <hr> <br>

                <h3>G. SELECT + LIMIT</h3>
<pre>
    SELECT id, name <br>
    FROM users <br>
    LIMIT 10;
</pre>

                <p>Ambil 10 data pertama.</p>

                <br> <hr> <br>

                <h3>H. SELECT + OFFSET (pagination)</h3>
<pre>
    SELECT id, name <br>
    FROM users <br>
    LIMIT 10 OFFSET 20;
</pre>

                <p>Artinya: <br> <br>

                page ke-3 (0‚Äì9, 10‚Äì19, 20‚Äì29)</p>

                <br> <hr> <br>

                <h3>I. Urutan Eksekusi SELECT (WAJIB PAHAM)</h3>

                <p>Secara logika:
                <ul>
                    <li><code>FROM</code></li>
                    <li><code>WHERE</code></li>
                    <li><code>SELECT</code></li>
                    <li><code>ORDER BY</code></li>
                    <li><code>LIMIT</code></li>
                </ul> <br>

                Ini penting saat query kompleks.</p>

                <br> <hr> <br>

                <h3>J. Kesalahan Umum Pemula ‚ùå</h3>

                <p>‚ùå SELECT * di tabel besar <br>
                ‚ùå Ambil kolom yang tidak dipakai <br>
                ‚ùå Tidak pakai LIMIT <br>
                ‚ùå Query tanpa alias saat JOIN</p>

                <br> <hr> <br>

                <h3>K. Contoh Query Nyata</h3>
<pre>
    SELECT id, email, created_at <br>
    FROM users <br>
    LIMIT 50;
</pre>

                <p>Simple, aman, efisien.</p>

                <br> <hr> <br>

                <h3>L. SELECT itu fondasi ke mana-mana</h3>

                <p>Dari sini kamu akan lanjut ke:
                <ul>
                    <li><code>WHERE</code></li>
                    <li><code>JOIN</code></li>
                    <li><code>GROUP BY</code></li>
                    <li><code>HAVING</code></li>
                    <li><code>Subquery</code></li>
                </ul> <br>
                
                SELECT = bahasa berpikir SQL</p>

                <br> <hr> <br>

                <h3>M. Mini Latihan üî•</h3>

                <p>Tabel products:</p>
<pre>
    id, name, price, stock
</pre>

                <p>Tugas:
                <ul>
                    <li>Ambil name & price</li>
                    <li>Ambil produk dengan total_value = price * stock</li>
                    <li>Ambil 5 produk pertama</li>
                </ul></p>
                
                <a href="2b-dml.html" class="btn-next">2b. DDL</a>
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>