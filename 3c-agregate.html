<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">
                <h2>.3 APA ITU AGGREGATE FUNCTION?</h2>

                <p>Aggregate function itu fungsi SQL yang:</p>

                <div class="quote"><p>mengambil banyak baris â†’ menghasilkan 1 nilai ringkasan</p></div>

                <p>Kalau SELECT biasa itu:
                <ul>
                    <li>fokus ke baris per baris</li>
                </ul> <br>
                

                Kalau aggregate:
                <ul>
                    <li>fokus ke keseluruhan data / kelompok data</li>
                </ul> <br>
                

                Contoh dunia nyata:

                <div class="quote"><p>Bukan â€œini transaksi apaâ€</p></div> <br>

                Tapi:
                <ul>
                    <li>berapa jumlah transaksi</li>
                    <li>total uang masuk</li>
                    <li>rata-rata penjualan</li>
                    <li>berapa transaksi per user</li>
                </ul></p>

                <br> <hr> <br>

                <h3>A. ğŸ”§ Fungsi Aggregate Utama</h3>

                <p>Yang akan kita bahas di 3.3:
                <ul>
                    <li><code>COUNT()</code> â†’ menghitung jumlah</li>
                    <li><code>SUM()</code> â†’ menjumlahkan nilai</li>
                    <li><code>AVG()</code> â†’ rata-rata</li>
                    <li><code>GROUP BY</code> â†’ mengelompokkan data</li>
                    <li><code>HAVING</code> â†’ filter hasil aggregate</li>
                </ul> <br>

                Hari ini kita fokus dulu ke pondasinya: <code>COUNT()</code></p>

                <br> <hr> <br>

                <h3>B. ğŸ§  CARA BERPIKIR AGGREGATE (PENTING!)</h3>

                <p>Biasanya flow berpikirnya begini:</p>

                <div class="quote"><p>â€œDari sekumpulan data ini, aku pengen tahu ringkasannya apa?â€</p></div>

                <p>Contoh: <br> <br>

                Dari tabel orders:
                <ul>
                    <li>ada berapa order</li>
                    <li>tiap user punya berapa order</li>
                    <li>tiap produk terjual berapa kali</li>
                </ul> <br> <br>
                

                Nahâ€¦ begitu kamu mikir â€œberapaâ€, â€œtotalâ€, â€œrata-rataâ€ <br>
                â¡ï¸ itu alarm aggregate ğŸš¨</p>

                <br> <hr> <br>

                <h2>3.3.1 COUNT() â€” MENGHITUNG DATA</h2>
                <h3>A. ğŸ”¹ Fungsi dasar</h3>
<pre>       
    COUNT()
</pre>     

                <p>Digunakan untuk:
                <ul>
                    <li>menghitung jumlah baris</li>
                    <li>menghitung jumlah data yang tidak NULL</li>
                </ul></p>

                <br> <hr> <br>

                <h3>B. âœ… CONTOH TABEL</h3>

                <p>Misal tabel orders:</p>

                <table>
                    <tr>
                        <th>id</th>
                        <th>user_id</th>
                        <th>total</th>
                        <th>status</th>
                    </tr>
                    <tr>
                        <td class="ct">1</td>
                        <td class="ct">1</td>
                        <td>100000</td>
                        <td class="ct">paid</td>
                    </tr>
                    <tr>
                        <td class="ct">2</td>
                        <td class="ct">1</td>
                        <td>150000</td>
                        <td class="ct">paid</td>
                    </tr>
                    <tr>
                        <td class="ct">3</td>
                        <td class="ct">2</td>
                        <td>200000</td>
                        <td class="ct">unpaid</td>
                    </tr>
                    <tr>
                        <td class="ct">4</td>
                        <td class="ct">3</td>
                        <td><code>NULL</code></td>
                        <td class="ct">paid</td>
                    </tr>
                </table>

                <br> <hr> <br>
                
                <h4>ğŸ”¹ 1. COUNT(*) â€” hitung semua baris</h4>
<pre>            
    SELECT COUNT(*) FROM orders;
</pre>

                <p>ğŸ§  Artinya:</p>

                <div class="quote"><p>â€œAda berapa baris di tabel orders?â€</p></div>

                <p>ğŸ“Œ Hasil:</p>
<pre>
    4
</pre>

                <p>â¡ï¸ <code>COUNT(*)</code> TIDAK PEDULI <code>NULL</code></p>

                <br> <hr> <br>

                <h4>ğŸ”¹ 2. COUNT(nama_kolom)</h4>
<pre>
    SELECT COUNT(total) FROM orders;
</pre>

                <p>ğŸ§  Artinya:</p>

                <div class="quote"><p>â€œAda berapa baris yang kolom total-nya tidak <code>NULL</code>?â€</p></div>

                <p>ğŸ“Œ Hasil:</p>
<pre>
    3
</pre>

                <p>(baris ke-4 total = NULL, jadi tidak dihitung)</p>

                <br> <hr> <br>

                <h4>âš ï¸ PERBEDAAN </h4>
                <table>
                    <tr>
                        <th>Query</th>
                        <th>Menghitung</th>
                    </tr>
                    <tr>
                        <td><code>COUNT(*)</code></td>
                        <td>Semua baris</td>
                    </tr>
                    <tr>
                        <td><code>COUNT(kolom)</code></td>
                        <td>Baris yang kolomnya tidak <code>NULL</code></td>
                    </tr>
                </table> <br>

                <p>Ini sering jadi jebakan Batman ğŸ¦‡ di dunia kerja.</p>

                <br> <hr> <br>

                <h4>ğŸ”¹ 3. COUNT dengan WHERE</h4>
<pre>
    SELECT COUNT(*)  <br>
    FROM orders <br>
    WHERE status = 'paid';
</pre>

                <p>ğŸ§  Artinya:</p>

                <div class="quote"><p>â€œAda berapa order yang statusnya paid?â€</p></div>

                <p>ğŸ“Œ Hasil:</p>
<pre>
    3
</pre>

                <p>â¡ï¸ WHERE jalan dulu, baru COUNT</p>

                <br> <hr> <br>

                <h4>ğŸ”¹ 4. COUNT + JOIN (real world banget)</h4>
<pre>
    SELECT COUNT(orders.id)  <br>
    FROM users <br>
    LEFT JOIN orders ON users.id = orders.user_id;
</pre>

                <p>Dipakai buat:
                <ul>
                    <li>hitung jumlah order</li>
                    <li>hitung relasi antar tabel</li>
                </ul> <br>
                
                Nanti ini bakal makin cakep pas digabung GROUP BY ğŸ”¥</p>

                <br> <hr> <br>

                <h3>C. ğŸ§ª USE CASE NYATA COUNT()</h3>

                <p>Contoh pertanyaan bisnis:
                <ul>
                    <li>Berapa total user?</li>
                    <li>Berapa order hari ini?</li>
                    <li>Berapa produk terjual?</li>
                    <li>Berapa transaksi per user?</li>
                </ul> <br>

                â¡ï¸ Jawabannya selalu mulai dari COUNT</p>

                <br> <hr> <br>

                <h3>D. ğŸ§  RANGKUMAN COUNT()</h3>
                <ul>
                    <li><code>COUNT(*)</code> â†’ hitung baris</li>
                    <li><code>COUNT(kolom)</code> â†’ hitung data tidak NULL</li>
                </ul> <br>
                
                <p>Bisa digabung:
                <ul>
                    <li><code>WHERE</code></li>
                    <li><code>JOIN</code></li>
                    <li>(sebentar lagi) GROUP BY</li>
                </ul></p>

                <br> <br>

                <hr>

                <br> <br>

                APA ITU SUM()?

                SUM() adalah aggregate function buat:

                menjumlahkan nilai numerik dari banyak baris

                Kalau COUNT() jawab:

                â€œada berapa?â€

                Maka SUM() jawab:

                â€œtotalnya berapa?â€

                ğŸ§  CARA BERPIKIR SUM()

                Biasanya kepake kalau kamu mikir:

                total penjualan

                total pengeluaran

                total stok

                total nilai transaksi

                Begitu ada kata total / jumlah uang / akumulasi
                â¡ï¸ SUM() langsung kepikiran

                ğŸ”§ SINTAKS DASAR
                SUM(nama_kolom)


                ğŸ“Œ Catatan:

                kolom HARUS numerik

                nilai NULL diabaikan

                âœ… CONTOH TABEL (orders)
                id	user_id	total	status
                1	1	100000	paid
                2	1	150000	paid
                3	2	200000	unpaid
                4	3	NULL	paid
                ğŸ”¹ 1. SUM dasar
                SELECT SUM(total) FROM orders;


                ğŸ§  Artinya:

                â€œTotal nilai semua order?â€

                ğŸ“Œ Hasil:

                450000


                (NULL tidak dihitung)

                ğŸ”¹ 2. SUM + WHERE (paling sering)
                SELECT SUM(total)
                FROM orders
                WHERE status = 'paid';


                ğŸ§  Artinya:

                â€œTotal uang dari order yang sudah dibayar?â€

                ğŸ“Œ Hasil:

                250000


                â¡ï¸ WHERE dulu â†’ baru SUM

                ğŸ”¹ 3. SUM + JOIN (real project)

                Misal:

                users

                orders

                SELECT users.name, SUM(orders.total) AS total_belanja
                FROM users
                JOIN orders ON users.id = orders.user_id
                GROUP BY users.id;


                ğŸ“Œ Output:

                name	total_belanja
                Andi	250000
                Budi	200000

                âš ï¸ Perhatikan:

                Begitu ada SUM()

                kolom lain WAJIB GROUP BY

                (ini jembatan ke materi berikutnya ğŸ‘€)

                ğŸ”¹ 4. SUM kolom hasil perhitungan
                SELECT SUM(price * qty) AS total_penjualan
                FROM order_items;


                ğŸ§  Artinya:

                â€œTotal omzet dari semua item?â€

                ğŸ”¥ Ini sering dipakai di:

                invoice

                laporan penjualan

                laporan keuangan

                âš ï¸ HAL PENTING TENTANG SUM()
                âŒ SALAH
                SELECT name, SUM(total)
                FROM orders;


                â¡ï¸ Error (karena name tidak di GROUP BY)

                âœ… BENAR
                SELECT user_id, SUM(total)
                FROM orders
                GROUP BY user_id;

                ğŸ§ª USE CASE NYATA SUM()

                Total omzet per hari

                Total pengeluaran per bulan

                Total stok per gudang

                Total penjualan per produk

                ğŸ§  RANGKUMAN SUM()

                SUM() â†’ menjumlahkan nilai numerik

                NULL diabaikan

                Hampir selalu dipakai barengan:

                WHERE

                JOIN

                GROUP BY
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>