<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">
                <h2>BAB 6 ‚Äî Transaction & Data Integrity (WAJIB untuk Finance)</h2>

                Kalau bab sebelumnya kita ngomongin performa,
                bab 6 ini ngomongin kepercayaan.

                ‚ùù Di sistem finance, data lambat masih bisa ditoleransi.
                Data SALAH? Game over. ‚ùû

                Bab ini jawab pertanyaan krusial:

                Gimana caranya banyak query dianggap satu kesatuan aksi

                Gimana caranya uang nggak dobel kepotong

                Gimana caranya data tetap benar walau server crash

                Gimana caranya 100 user akses data bersamaan tanpa chaos

                <br> <hr> <br>

                <h3>Struktur Bab 6</h3>

                Transaction ‚Üí pondasi

                ACID ‚Üí hukum alam transaksi

                Locking & Concurrency ‚Üí dunia nyata saat banyak user

                Sekarang kita fokus 6.1 dulu: TRANSACTION ITU SENDIRI

                <h2>6.1 Transaction ‚Äî Apa Itu Sebenarnya?</h2>

                <br> <hr> <br>
                    
                <h3>Definisi sederhana</h3>

                Transaction = sekumpulan query SQL yang dianggap sebagai SATU aksi utuh

                Entah:

                semua berhasil

                atau semua dibatalkan

                Tidak ada setengah-setengah.

                <br> <hr> <br>

                <h3>Analogi Dunia Nyata (WAJIB PAHAM)</h3>
                üí∏ Transfer Uang

                Transfer 100rb dari A ke B:

                Saldo A dikurangi

                Saldo B ditambah

                ‚ùå Kalau cuma langkah 1 yang jalan ‚Üí uang hilang
                ‚ùå Kalau cuma langkah 2 yang jalan ‚Üí uang muncul dari langit

                üëâ Keduanya HARUS sukses bersamaan

                Itulah TRANSACTION

                <br> <hr> <br>

                <h3>Tanpa Transaction (BENCANA)</h3>
                UPDATE accounts SET balance = balance - 100000 WHERE id = 1;
                UPDATE accounts SET balance = balance + 100000 WHERE id = 2;


                Kalau query kedua error:

                saldo A sudah berkurang

                saldo B tidak bertambah

                üí• DATA RUSAK

                <br> <hr> <br>

                <h3>Dengan Transaction (PROFESSIONAL WAY)</h3>
                START TRANSACTION;

                UPDATE accounts SET balance = balance - 100000 WHERE id = 1;
                UPDATE accounts SET balance = balance + 100000 WHERE id = 2;

                COMMIT;


                Kalau salah satu gagal ‚Üí bisa dibatalkan semua

                <br> <hr> <br>

                <h3>Komponen Utama Transaction</h3>

                Transaction selalu punya 3 keyword inti:

                START TRANSACTION

                COMMIT

                ROLLBACK

                Sekarang kita bahas satu per satu, pelan tapi nempel.

                1Ô∏è‚É£ START TRANSACTION
                Fungsinya

                Menandai bahwa semua query setelah ini masuk mode transaksi

                Database bilang:

                ‚ÄúOke, gue catat dulu.
                Belum gue permanenin sebelum kamu bilang OK.‚Äù

                START TRANSACTION;


                Setelah ini:

                perubahan belum disimpan permanen

                masih bisa dibatalkan

                Penting Banget

                Semua query SETELAH START TRANSACTION:

                dianggap satu paket

                tidak langsung ditulis permanen ke disk

                2Ô∏è‚É£ COMMIT
                Fungsinya

                Mengunci semua perubahan ‚Üí resmi & permanen

                COMMIT;


                Artinya:

                semua query berhasil

                database bilang:
                ‚ÄúSip, gue simpan selamanya‚Äù

                Setelah COMMIT:

                ‚ùå tidak bisa rollback

                data sudah fix

                3Ô∏è‚É£ ROLLBACK
                Fungsinya

                Membatalkan semua perubahan sejak START TRANSACTION

                ROLLBACK;


                Efeknya:

                semua update / insert / delete ‚Üí DIHAPUS

                data balik ke kondisi awal

                <br> <hr> <br>

                <h3>Contoh REAL CASE (Finance Banget)</h3>
                START TRANSACTION;

                INSERT INTO orders (user_id, total) VALUES (1, 500000);

                UPDATE accounts
                SET balance = balance - 500000
                WHERE user_id = 1;

                -- kalau saldo tidak cukup
                ROLLBACK;

                -- kalau semua aman
                COMMIT;


                üëâ Ini wajib kalau:

                pembayaran

                invoice

                jurnal akuntansi

                stok + transaksi

                <br> <hr> <br>

                <h3>Kenapa Transaction WAJIB di Sistem Finance?</h3>

                Karena:

                ‚ùå error jaringan bisa terjadi

                ‚ùå server bisa restart

                ‚ùå aplikasi bisa crash

                ‚ùå user bisa spam klik

                Transaction adalah:

                sabuk pengaman database

                <br> <hr> <br>

                <h3>Mindset Penting (WAJIB DISIMPAN DI OTAK)</h3>

                ‚ùå Transaction bukan soal kecepatan
                ‚úÖ Transaction soal kebenaran data

                Kalau kamu bikin:

                e-wallet

                POS

                invoice system

                accounting

                SaaS finance

                dan tidak pakai transaction
                ‚Üí itu bom waktu üí£

                <br> <hr> <br>

                <h3>Ringkasan 6.1 (Checkpoint Otak üß†)</h3>

                Transaction = satu paket query

                Semua berhasil ‚Üí COMMIT

                Ada satu gagal ‚Üí ROLLBACK

                Digunakan saat data saling bergantung

                Finance TANPA transaction = NGACO

                <br> <br>

                <hr>

                <br> <br>

                <a href="6b-acid.html" class="btn-next">6b.ACID</a>
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>