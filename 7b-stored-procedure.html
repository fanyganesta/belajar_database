<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">    
                <h2>7.2 Stored Procedure</h2>

                Logic yang hidup di dalam database

                Seperti biasa, kita rapi pakai penanda:

                A. Apa itu Stored Procedure
                B. Cara Kerja Stored Procedure
                C. Karakteristik Stored Procedure
                D. Contoh Stored Procedure Sederhana
                E. Posisi Stored Procedure dalam Arsitektur Sistem

                (Pro & Kontra kita bahas di 7.2.1 nanti)

                <br> <hr> <br>

                <h3>A. Apa itu Stored Procedure</h3>

                Stored Procedure (SP) adalah:

                sekumpulan SQL + control flow
                yang disimpan dan dijalankan di database

                Bukan cuma:

                SELECT

                INSERT

                Tapi juga:

                IF

                LOOP

                TRANSACTION

                VARIABLE

                Mental Model

                Kalau:

                View = query yang disimpan

                Stored Procedure = function di level database

                <br> <hr> <br>

                <h3>B. Cara Kerja Stored Procedure</h3>

                1ï¸âƒ£ Kamu definisikan procedure
                2ï¸âƒ£ Database menyimpannya
                3ï¸âƒ£ Aplikasi memanggilnya

                CALL transfer_balance(1, 2, 100000);


                ğŸ‘‰ Database:

                eksekusi logic

                jaga transaksi

                return hasil

                <br> <hr> <br>

                <h3>C. Karakteristik Stored Procedure</h3>
                1ï¸âƒ£ Berjalan di Server Database

                lebih dekat ke data

                minim data transfer

                2ï¸âƒ£ Bisa Mengelola Transaction
                START TRANSACTION;
                -- logic
                COMMIT;

                3ï¸âƒ£ Bisa Memiliki Parameter

                input

                output

                inout

                4ï¸âƒ£ Bisa Digunakan Ulang

                satu logic

                banyak aplikasi

                5ï¸âƒ£ Tidak Bergantung Bahasa Aplikasi

                PHP, Java, Go:

                tinggal CALL

                <br> <hr> <br>

                <h3>D. Contoh Stored Procedure Sederhana</h3>
                Contoh: Transfer Saldo
                DELIMITER //

                CREATE PROCEDURE transfer_balance(
                    IN from_account INT,
                    IN to_account INT,
                    IN amount DECIMAL(12,2)
                )
                BEGIN
                    START TRANSACTION;

                    UPDATE accounts
                    SET balance = balance - amount
                    WHERE id = from_account;

                    UPDATE accounts
                    SET balance = balance + amount
                    WHERE id = to_account;

                    COMMIT;
                END //

                DELIMITER ;


                Pemanggilan:

                CALL transfer_balance(1, 2, 100000);


                ğŸ‘‰ Atomic
                ğŸ‘‰ Aman
                ğŸ‘‰ Konsisten

                <br> <hr> <br>

                <h3>E. Posisi Stored Procedure dalam Arsitektur</h3>
                Tanpa Stored Procedure
                App
                â”œâ”€ validasi
                â”œâ”€ transaction
                â”œâ”€ update
                â”œâ”€ rollback
                DB

                Dengan Stored Procedure
                App
                â””â”€ CALL procedure
                DB
                â”œâ”€ logic
                â”œâ”€ transaction
                â””â”€ data


                ğŸ‘‰ Logic lebih dekat ke data

                Kapan Stored Procedure Biasanya Muncul?

                sistem perbankan

                ERP

                legacy enterprise

                reporting berat

                data migration

                Hal Penting Sebelum Lanjut

                Stored Procedure itu:

                kuat

                berbahaya

                tidak fleksibel

                Makanya:

                harus paham pro & kontra sebelum pakai

                Ringkasan Singkat
                View	Stored Procedure
                Read-only	Read + Write
                Query	Logic
                Aman	Perlu disiplin
                Mudah	Kompleks


                <br> <br>

                <hr>

                <br> <br>

                <h2>7.2.1 Pro & Kontra Stored Procedure</h2>

                Power vs Flexibility

                Struktur rapi ya:

                A. Kubu PRO Stored Procedure (kenapa banyak yang bela mati-matian)
                B. Kubu KONTRA Stored Procedure (kenapa banyak yang benci ğŸ˜…)
                C. Mitos vs Fakta
                D. Posisi Netral Profesional (jalan tengah)

                <br> <hr> <br>

                <h3>A. PRO Stored Procedure</h3>

                â€œLogic harus dekat dengan dataâ€

                1ï¸âƒ£ Konsistensi Data Tingkat Tinggi

                Semua aplikasi:

                mobile

                web

                API

                ğŸ‘‰ pakai logic yang sama

                Tidak ada:

                beda perhitungan

                lupa validasi

                logic ke-skip

                2ï¸âƒ£ Transaksi Lebih Aman

                SP bisa:

                kelola transaction

                lock row

                rollback otomatis

                Sangat cocok:

                finance

                inventory

                ledger

                3ï¸âƒ£ Performa (Kondisional)

                Karena:

                logic jalan di DB

                minim network roundtrip

                ğŸ‘‰ terutama untuk:

                batch processing

                data besar

                4ï¸âƒ£ Security Lebih Ketat

                Aplikasi:

                tidak perlu akses langsung ke tabel

                cukup EXECUTE procedure

                ğŸ‘‰ surface area kecil

                5ï¸âƒ£ Legacy & Enterprise Friendly

                Banyak sistem besar:

                SAP

                core banking

                ERP lama

                ğŸ‘‰ bergantung ke SP

                <br> <hr> <br>

                <h3>B. KONTRA Stored Procedure</h3>

                â€œIni neraka maintainabilityâ€

                1ï¸âƒ£ Sulit Testing

                Tidak ada:

                unit test enak

                mocking

                Testing SP:

                manual

                berat

                mahal

                2ï¸âƒ£ Sulit Versioning

                Git:

                suka text diff

                branching

                Stored Procedure:

                sering langsung di DB

                rawan beda environment

                3ï¸âƒ£ Tight Coupling ke Database

                Pindah DB?

                MySQL â†’ PostgreSQL

                MySQL â†’ Cloud DB lain

                ğŸ’€ rewrite semua SP

                4ï¸âƒ£ Logic Tersembunyi

                Bug sering:

                â€œkok datanya berubah?â€

                â€œsiapa yang update?â€

                Jawaban:

                â€œOh, ada SP di DBâ€¦â€

                ğŸ˜µâ€ğŸ’«

                5ï¸âƒ£ Skill Barrier

                developer biasa âŒ

                DBA senior âœ…

                Tim kecil:

                risk tinggi

                bus factor 1

                <br> <hr> <br>

                <h3>C. Mitos vs Fakta</h3>
                âŒ Mitos: Stored Procedure Selalu Lebih Cepat

                âœ… Fakta:

                tergantung desain

                query jelek â†’ tetap lambat

                âŒ Mitos: Stored Procedure Selalu Aman

                âœ… Fakta:

                logic salah â†’ data rusak cepat ğŸ˜¬

                âŒ Mitos: Stored Procedure Itu Jadul

                âœ… Fakta:

                masih dipakai di sistem besar

                tapi dengan disiplin tinggi

                <br> <hr> <br>

                <h3>D. Posisi Netral Profesional (Best Practice Modern)</h3>

                ğŸ”¥ Ini mindset yang paling sehat:

                Logic bisnis utama di Application
                Logic data-critical di Database

                Apa yang BOLEH di Stored Procedure

                âœ…:

                transaksi finansial

                batch update

                data migration

                reporting heavy

                sinkronisasi data

                Apa yang JANGAN di Stored Procedure

                âŒ:

                aturan bisnis yang sering berubah

                flow user

                validasi UI

                conditional kompleks berbasis user

                Rule of Thumb

                Kalau logic:

                sering berubah â†’ App

                jarang berubah + kritikal â†’ DB

                Ringkasan Mental Model
                Aspek	Stored Procedure
                Power	ğŸ”¥ğŸ”¥ğŸ”¥
                Fleksibilitas	âŒ
                Maintainability	âš ï¸
                Konsistensi	âœ…
                Risiko	Tinggi kalau salah
                Kesimpulan Jujur

                Stored Procedure itu:

                senjata berat

                Kalau:

                tim kecil

                startup

                agile cepat

                ğŸ‘‰ pakai hemat

                Kalau:

                finance

                enterprise

                data integrity nomor 1

                ğŸ‘‰ worth it

                <a href="7c-trigger.html" class="btn-next">7c. Trigger</a>
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>