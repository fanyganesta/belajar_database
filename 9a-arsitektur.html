<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Type</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>

        <main>
            <header>
                
            </header>
            
            <div class="content">
                <h2>BAB 9: MySQL di Dunia Nyata (Production Mindset)</h2>

                â€œDatabase di production bukan soal SQL pintar,
                tapi soal stabil, aman, dan bisa tumbuh.â€

                Di bab ini, kita berhenti mikir sebagai coder,
                dan mulai mikir sebagai engineer yang jaga sistem hidup.

                <br> <hr> <br>

                <h3>A. Perbedaan Belajar vs Dunia Nyata</h3>
                Saat belajar:

                satu database

                satu user

                satu query

                Di production:

                ribuan user

                query paralel

                data tidak boleh hilang

                downtime = uang hilang

                ğŸ“Œ Kesalahan kecil = dampak besar

                <br> <hr> <br>

                <h3>B. Tujuan Bab 9</h3>

                Setelah bab ini, kamu:

                ngerti arsitektur database

                paham cara sistem tumbuh

                tahu kapan ORM aman / berbahaya

                nggak kaget lihat istilah enterprise

                <br> <hr> <br>

                <h3>C. Production Mindset (Pola Pikir Baru)</h3>

                Engineer production mikir:

                kalau server mati?

                kalau traffic naik 10x?

                kalau query lambat?

                kalau data bocor?

                Bukan:

                â€œyang penting jalan di laptopâ€

                <br> <br>

                <hr> 

                <br> <br>

                <h2>9.1 Arsitektur Database (Fondasi Sistem)</h2>

                Arsitektur = cara database ditempatkan & dihubungkan

                <br> <hr> <br>

                <h3>A. Apa itu Arsitektur Database?</h3>

                Arsitektur menjawab:

                ada berapa database?

                siapa akses ke mana?

                bagaimana data dipisah?

                ğŸ“Œ Ini bukan soal query, tapi soal desain sistem.

                <br> <hr> <br>

                <h3>B. Evolusi Arsitektur (Nyata di Industri)</h3>

                Biasanya sistem tumbuh seperti ini:

                Single DB

                Multi Database

                Multi-Tenant

                <br> <hr> <br>

                <h3>9.1.1 Single Database (Awal Semua Sistem)</h3>
                <br> <hr> <br>

                <h4>A. Gambaran</h4>
                [ App ] â†’ [ MySQL ]


                Semua:

                user

                order

                produk

                laporan

                â¡ï¸ satu database

                <br> <hr> <br>

                <h4>B. Kapan Dipakai?</h4>

                âœ… MVP
                âœ… UMKM
                âœ… traffic kecil
                âœ… satu bisnis

                <br> <hr> <br>

                <h4>C. Kelebihan</h4>

                âœ” setup simpel
                âœ” murah
                âœ” gampang debug

                <br> <hr> <br>

                <h4>D. Kekurangan</h4>

                âŒ kalau DB mati â†’ semua mati
                âŒ scaling terbatas
                âŒ laporan berat ganggu transaksi

                <br> <hr> <br>

                <h4>E. Contoh Nyata</h4>

                Website:

                toko online kecil

                company profile + admin

                ğŸ“Œ 90% aplikasi dimulai dari sini.

                <br> <br>

                <hr>

                <br> <br>

                <h3>9.1.2 Multi Database (Pisah Beban)</h3>

                â€œJangan campur dapur dengan gudang.â€

                <br> <hr> <br>

                <h4>A. Gambaran</h4>
                [ App ]
                â”œâ”€â”€ MySQL (transaksi)
                â””â”€â”€ MySQL (laporan)

                <br> <hr> <br>

                <h4>B. Kenapa Dipisah?</h4>

                laporan berat

                query agregat

                read-only data

                ğŸ“Œ Biar transaksi tetap cepat.

                <br> <hr> <br>

                <h4>C. Contoh Kasus</h4>

                DB 1: orders, payments

                DB 2: laporan, analytics

                <br> <hr> <br>

                <h4>D. Kelebihan</h4>

                âœ” performa stabil
                âœ” isolasi masalah
                âœ” lebih aman

                <br> <hr> <br>

                <h4>E. Kekurangan</h4>

                âŒ kompleks
                âŒ sinkronisasi data
                âŒ biaya naik

                <br> <br>

                <hr>

                <br> <br>

                <h3>9.1.3 Multi-Tenant (Level SaaS)</h3>

                â€œSatu sistem, banyak pelanggan.â€

                <br> <hr> <br>

                <h4>A. Apa itu Tenant?</h4>

                Tenant = satu perusahaan / satu klien

                Contoh:

                SaaS accounting

                HR system

                POS cloud

                <br> <hr> <br>

                <h4>B. Pola Multi-Tenant</h4>
                1ï¸âƒ£ Shared DB, Shared Table
                users (tenant_id)
                orders (tenant_id)

                2ï¸âƒ£ Shared DB, Separate Schema
                tenant_a.users
                tenant_b.users

                3ï¸âƒ£ Separate Database per Tenant
                db_tenant_a
                db_tenant_b

                <br> <hr> <br>

                <h4>C. Mana yang Dipilih?</h4>
                Model	Cocok untuk
                Shared table	tenant kecil
                Separate schema	menengah
                Separate DB	enterprise

                ğŸ“Œ Semakin ke kanan â†’ makin aman, makin mahal.

                <br> <hr> <br>

                <h4>D. Kesalahan Fatal di Arsitektur</h4>

                âŒ langsung multi-tenant tanpa kebutuhan
                âŒ laporan berat di DB transaksi
                âŒ semua pakai satu user DB

                ğŸ§  Ringkasan 9.1 Arsitektur

                Arsitektur itu soal kesiapan tumbuh,
                bukan soal keren-kerenan.

                Mulai dari:

                yang sederhana

                bisa dikontrol

                siap berkembang

                <br> <br>

                <hr>

                <br> <br>

                <h2>9.1.1 Single Database (Bedah Sampai Akar)</h2>

                Single DB bukan berarti jelek.
                Justru: ini fondasi yang BENAR kalau dipakai dengan sadar.

                <br> <hr> <br>

                <h3>A. Apa yang Dimaksud Single Database (Super Jelas)</h3>

                Single Database = satu server database / satu instance MySQL
                yang dipakai oleh seluruh aplikasi.

                Diagram sederhana:

                [ Web / API / Admin ] â†’ [ MySQL ]


                Semua data:

                users

                orders

                products

                payments

                logs

                reports

                â¡ï¸ masuk ke satu DB

                <br> <hr> <br>

                <h3>B. Kenapa 90% Sistem Dimulai dari Single DB?</h3>

                Karena dunia nyata itu:

                butuh cepat jalan

                butuh murah

                butuh simpel

                Single DB itu:
                âœ” paling cepat dibangun
                âœ” paling sedikit bug
                âœ” paling gampang dipahami

                <br> <hr> <br>

                <h3>C. Kapan Single DB adalah PILIHAN YANG TEPAT</h3>

                Single DB sangat cocok kalau:

                âœ” user < puluhan ribu
                âœ” traffic stabil
                âœ” tim kecil
                âœ” fitur masih berkembang
                âœ” laporan belum berat

                ğŸ“Œ Banyak startup sukses bertahun-tahun pakai single DB.

                <br> <hr> <br>

                <h3>D. Komponen di Dalam Single DB (Sering Salah Kaprah)</h3>

                Single DB bukan berarti asal campur.

                Di dalamnya tetap harus ada:

                D.1 Struktur Schema Rapi

                tabel jelas

                relasi jelas

                index benar

                D.2 User DB Berbeda

                Walaupun DB-nya satu:

                app_user

                report_user

                backup_user

                ğŸ“Œ Satu DB â‰  satu user

                D.3 Index & Query Sehat

                Single DB hidup-matinya di:

                index

                query

                Tanpa itu:
                â¡ï¸ pelan â†’ stres â†’ scaling terlalu cepat

                <br> <hr> <br>

                <h3>E. Masalah Nyata yang Muncul di Single DB</h3>

                Ini bukan teori, ini kejadian harian.

                E.1 Query Laporan Berat

                Contoh:

                SELECT
                DATE(created_at),
                SUM(total)
                FROM orders
                GROUP BY DATE(created_at);


                ğŸ“Œ Kalau tabel besar:

                CPU naik

                query lain ikut lambat

                E.2 Locking Tanpa Sadar

                UPDATE besar

                DELETE massal

                migration jam sibuk

                â¡ï¸ user lain nunggu

                E.3 Backup Mengganggu Performa

                Backup tanpa --single-transaction:

                tabel ke-lock

                transaksi nunggu

                <br> <hr> <br>

                <h3>F. Cara MENYELAMATKAN Single DB (Best Practice)</h3>

                Ini ilmu emas ğŸ”‘

                F.1 Pisahkan Jam Sibuk & Jam Berat

                laporan â†’ malam

                backup â†’ dini hari

                migration â†’ low traffic

                ğŸ“Œ Ini bisa bikin Single DB awet lama.

                F.2 Index itu WAJIB, bukan Opsional

                Kalau query sering dipakai:

                WHERE

                JOIN

                ORDER BY

                â¡ï¸ harus ada index

                F.3 Batasi Query Berbahaya

                LIMIT wajib

                hindari SELECT *

                pagination

                F.4 Monitor (Walau Sederhana)

                Minimal tahu:

                query paling lambat

                tabel paling besar

                index tidak terpakai

                <br> <hr> <br>

                <h3>G. Batas Alami Single DB</h3>

                Single DB pasti punya batas, tapi sering jauh lebih tinggi dari yang dikira.

                Biasanya mulai terasa saat:

                jutaan row aktif

                laporan berat real-time

                traffic paralel tinggi

                ğŸ“Œ Jangan pindah arsitektur terlalu cepat.

                <br> <hr> <br>

                <h3>H. Kesalahan Fatal Terkait Single DB</h3>

                âŒ takut single DB lalu over-engineering
                âŒ langsung microservice
                âŒ langsung sharding

                â¡ï¸ sistem kompleks, bug lebih banyak

                <br> <hr> <br>

                <h3>I. Pola Evolusi yang BENAR</h3>

                Single DB â†’
                optimasi query & index â†’
                pisah laporan â†’
                replica â†’
                baru scaling kompleks

                ğŸ“Œ Ini jalur sehat.

                <br> <hr> <br>

                <h3>ğŸ§  Ringkasan Mental Model</h3>

                Single DB itu seperti rumah kecil.
                Kalau rapi & terawat, bisa nyaman lama.

                Masalah bukan di â€œsingleâ€-nya,
                tapi di:

                query buruk

                index asal

                disiplin rendah

                <br> <br>

                <hr>

                <br> <br>

                <h2>9.1.2 Multi Database (Pisah Beban Biar Sistem Napas)</h2>

                â€œSingle DB itu rumah.
                Multi DB itu rumah + gudang + kantor.â€

                Bukan buat gaya-gayaan â€” tapi buat bertahan hidup.

                <br> <hr> <br>

                <h3>A. Apa itu Multi Database? (Versi Paling Manusia)</h3>

                Multi Database = satu aplikasi pakai LEBIH DARI SATU database.

                Diagram simpel:

                [ App ]
                â”œâ”€â”€ MySQL_DB_Transaksi
                â””â”€â”€ MySQL_DB_Laporan


                ğŸ“Œ Masih satu aplikasi
                ğŸ“Œ Bukan microservice
                ğŸ“Œ Tapi beban dipisah

                <br> <hr> <br>

                <h3>B. Kenapa Orang Beralih ke Multi DB?</h3>

                Karena Single DB mulai ngos-ngosan.

                Biasanya karena:

                laporan berat

                agregasi besar

                query lama

                traffic naik

                ğŸ“Œ BUKAN karena â€œbiar kerenâ€.

                <br> <hr> <br>

                <h3>C. Pola Multi DB Paling Umum (Nyata di Industri)</h3>
                C.1 Transaksi vs Laporan

                DB Transaksi

                INSERT / UPDATE cepat

                order

                payment

                user activity

                DB Laporan

                SELECT berat

                GROUP BY

                grafik

                dashboard

                ğŸ“Œ Laporan tidak boleh ganggu transaksi.

                C.2 Operational vs Archive

                DB Aktif

                data 1â€“2 tahun terakhir

                DB Arsip

                data lama

                jarang diakses

                ğŸ“Œ Query harian jadi jauh lebih ringan.

                <br> <hr> <br>

                <h3>D. Cara Data Masuk ke DB Kedua?</h3>

                Ini sering bikin bingung, kita jelasin pelan.

                D.1 Copy Berkala (Batch Sync)

                Contoh:

                setiap malam

                setiap jam

                Cara:

                DB Transaksi â†’ Export â†’ Import â†’ DB Laporan


                âœ” simpel
                âŒ data tidak real-time

                D.2 ETL (Extract, Transform, Load)

                extract dari DB utama

                transform (bersih / ringkas)

                load ke DB laporan

                ğŸ“Œ dipakai di sistem menengah ke atas.

                D.3 Read Replica (nyambung ke bab 9.2)

                DB kedua copy otomatis dari DB utama.

                ğŸ“Œ ini bukan manual copy.

                <br> <hr> <br>

                <h3>E. Keuntungan Multi Database (Nyata Banget)</h3>

                âœ” transaksi lebih cepat
                âœ” laporan bebas berat
                âœ” masalah terisolasi
                âœ” scaling lebih fleksibel

                <br> <hr> <br>

                <h3>. Kekurangan & Risiko (Jujur)</h3>

                âŒ sistem lebih kompleks
                âŒ data bisa tidak sinkron
                âŒ maintenance nambah
                âŒ biaya naik

                ğŸ“Œ Makanya jangan lompat terlalu cepat.

                <br> <hr> <br>

                <h3>G. Kesalahan Fatal Pemula</h3>

                âŒ langsung multi DB tanpa problem nyata
                âŒ lupa data sync
                âŒ query lintas DB
                âŒ semua user punya akses ke semua DB

                <br> <hr> <br>

                <h3>H. Best Practice Multi Database (Wajib Tahu)</h3>
                H.1 Aplikasi Tahu DB Mana untuk Apa

                Contoh:

                write â†’ DB transaksi

                read laporan â†’ DB laporan

                ğŸ“Œ Jangan kebalik.

                H.2 User DB Dipisah
                DB	User
                Transaksi	app_user
                Laporan	report_user
                H.3 Monitoring Terpisah

                slow query transaksi

                query berat laporan

                <br> <hr> <br>

                <h3>I. Kapan HARUS Pindah ke Multi DB?</h3>

                Checklist jujur:

                â“ laporan bikin transaksi lambat?

                â“ query agregat berat?

                â“ data makin besar?

                â“ scaling single DB mentok?

                Kalau 2â€“3 â€œyaâ€ â†’ waktunya.

                <br> <hr> <br>

                <h3>ğŸ§  Ringkasan Mental Model</h3>

                Multi Database bukan solusi pertama,
                tapi solusi saat sistem mulai berat.

                Single DB â†’ optimasi â†’ Multi DB â†’ replica â†’ sharding

                ğŸ“Œ Urutan ini menyelamatkan banyak tim.

                <br> <br>

                <hr>

                <br> <br>

                <h2>9.1.3 Multi-Tenant Architecture</h2>

                Satu aplikasi â†’ melayani banyak â€œtenantâ€ (client / perusahaan / user group) secara terisolasi

                <br> <hr> <br>

                <h3>A. Apa itu Multi-Tenant? (versi manusia)</h3>

                Multi-tenant = satu aplikasi, banyak â€œrumahâ€

                Bayangin:

                Kamu bikin 1 aplikasi Laravel

                Tapi dipakai oleh:

                Company A

                Company B

                Company C

                Data tidak boleh campur

                Tapi code-nya satu

                ğŸ‘‰ Setiap company = tenant

                <br> <hr> <br>

                <h3>B. Kenapa Dunia Nyata Suka Multi-Tenant?</h3>

                Karena:

                ğŸ”¥ Hemat biaya

                ğŸ”¥ Maintenance lebih simpel

                ğŸ”¥ Scale lebih mudah

                ğŸ”¥ Cocok untuk:

                SaaS

                ERP

                HR system

                Accounting system

                Learning platform

                Marketplace B2B

                Contoh real:

                Notion

                Shopify

                Xero

                Google Workspace

                <br> <hr> <br>

                <h3>C. Masalah Utama Multi-Tenant (yang harus kamu sadari)</h3>

                Multi-tenant BUKAN cuma â€œtambah company_idâ€

                Masalah real:

                âŒ Data bocor antar tenant

                âŒ Query lambat karena data gede

                âŒ Backup ribet

                âŒ Migration makin kompleks

                âŒ Permission & role makin sensitif

                Makanya arsitekturnya harus jelas dari awal

                <br> <hr> <br>

                <h3>D. Pola Multi-Tenant (INI BAGIAN PALING PENTING)</h3>

                Ada 3 pendekatan utama
                (kita bahas dari yang paling simpel â†’ paling enterprise)

                1ï¸âƒ£ Single Database + Shared Tables

                (tenant_id / company_id)

                Struktur
                database: app_db

                users
                - id
                - company_id
                - name
                - email

                orders
                - id
                - company_id
                - total

                Cara kerja

                Semua tenant pakai database & table yang sama

                Data dipisah pakai company_id

                Contoh Query
                SELECT * FROM orders WHERE company_id = 3;

                âœ… Kelebihan

                Paling mudah

                Migration gampang

                ORM friendly

                Cocok untuk MVP

                âŒ Kekurangan

                Risiko data bocor kalau query salah

                Table makin besar â†’ performa turun

                Backup per tenant susah

                ğŸ‘‰ Cocok untuk:

                Startup awal

                User < ribuan

                Data masih kecil

                2ï¸âƒ£ Single Database + Separate Schema / Table

                (semi-isolated)

                Struktur
                app_db

                company_1_users
                company_1_orders

                company_2_users
                company_2_orders


                atau (di DB lain seperti PostgreSQL):

                schema_company_1.users
                schema_company_2.users

                Cara kerja

                Database tetap satu

                Tapi table / schema dipisah per tenant

                âœ… Kelebihan

                Isolasi lebih aman

                Data bocor hampir nol

                Query lebih cepat per tenant

                âŒ Kekurangan

                Migration kompleks

                Table bisa ribuan

                ORM agak ribet

                ğŸ‘‰ Cocok untuk:

                Mid-scale SaaS

                Tenant tidak terlalu banyak

                Perlu isolasi lebih kuat

                3ï¸âƒ£ Database per Tenant (Paling Aman & Mahal)
                Struktur
                company_a_db
                company_b_db
                company_c_db

                Cara kerja

                Setiap tenant punya database sendiri

                Aplikasi cuma switch koneksi

                Contoh (Laravel)
                config(['database.connections.tenant.database' => $dbName]);
                DB::purge('tenant');
                DB::reconnect('tenant');

                âœ… Kelebihan

                ğŸ” Isolasi total

                Backup per tenant gampang

                Scaling fleksibel

                Enterprise-grade

                âŒ Kekurangan

                Setup kompleks

                Migration harus jalan ke banyak DB

                Operasional berat

                ğŸ‘‰ Cocok untuk:

                SaaS serius

                Data sensitif

                Company besar

                Skema langganan mahal

                <br> <hr> <br>

                <h3>E. Istilah Penting (biar nggak bingung)</h3>
                ğŸ”¹ Tenant

                Satu unit pengguna
                Biasanya = company / organisasi / customer

                ğŸ”¹ Isolation

                Seberapa kuat data tenant dipisahkan

                Model	Isolasi
                Shared table	Lemah
                Separate table	Sedang
                Separate DB	Kuat

                <br> <hr> <br>

                <h3>F. Multi-Tenant & Laravel (konteks kamu)</h3>

                Karena kamu:

                Pake Laravel

                Pernah bahas database per company

                Bangun sistem bisnis

                ğŸ‘‰ Best path buat kamu:

                Mulai dari:
                Single DB + company_id

                Naik level ke:
                Database per tenant

                Siapkan:

                Middleware tenant

                Dynamic DB connection

                Migration runner per tenant

                Ini production mindset banget ğŸ”¥

                <br> <hr> <br>

                <h3>G. Kesalahan Umum (Wajib dihindari)</h3>

                âŒ Lupa filter company_id
                âŒ Admin bisa lihat data tenant lain
                âŒ Migration cuma jalan di main DB
                âŒ Backup nyampur
                âŒ Pakai SELECT * di table shared

                <br> <hr> <br>

                <h3>H. Ringkasan Super Singkat</h3>

                Multi-Tenant bukan fitur, tapi arsitektur

                Model	Cocok untuk
                Shared DB	MVP
                Shared DB + Table	Mid
                DB per Tenant	Enterprise

                <br> <br> 

                <hr> 

                <br> <br>

                <a href="9b-scaling.html" class="btn-next">9b. Scalling</a>
            </div>
        </main>
    </div>

    <script>
        fetch('layout/aside.html').then(response => response.text()).then(data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop();
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>